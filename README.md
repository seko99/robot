# Robot Control System

–ü—Ä–æ–µ–∫—Ç —Å–∏—Å—Ç–µ–º—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –º–æ–±–∏–ª—å–Ω—ã–º —Ä–æ–±–æ—Ç–æ–º —Å –¥–∏—Ñ—Ñ–µ—Ä–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–º –ø—Ä–∏–≤–æ–¥–æ–º –Ω–∞ –±–∞–∑–µ Arduino –∏ Orange Pi Zero 3.

## ü§ñ –û–ø–∏—Å–∞–Ω–∏–µ

–≠—Ç–æ –∫–æ–º–ø–ª–µ–∫—Å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ä–æ–±–æ—Ç–æ–º, —Å–æ—Å—Ç–æ—è—â–∞—è –∏–∑:

- **Arduino –º–∏–∫—Ä–æ–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã** –¥–ª—è –Ω–∏–∑–∫–æ—É—Ä–æ–≤–Ω–µ–≤–æ–≥–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –º–æ—Ç–æ—Ä–∞–º–∏ –∏ —Å–µ–Ω—Å–æ—Ä–∞–º–∏
- **Orange Pi Zero 3** –∫–∞–∫ –æ—Å–Ω–æ–≤–Ω–æ–π –∫–æ–º–ø—å—é—Ç–µ—Ä –¥–ª—è –≤—ã—Å–æ–∫–æ—É—Ä–æ–≤–Ω–µ–≤–æ–π –ª–æ–≥–∏–∫–∏
- **ROS2 –ø–∞–∫–µ—Ç—ã** –¥–ª—è –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
- **–£–ª—å—Ç—Ä–∞–∑–≤—É–∫–æ–≤—ã–µ –¥–∞—Ç—á–∏–∫–∏** –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–π
- **–≠–Ω–∫–æ–¥–µ—Ä—ã** –¥–ª—è –æ–¥–æ–º–µ—Ç—Ä–∏–∏
- **–õ–∏–¥–∞—Ä LDS01RR** –¥–ª—è 2D —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –æ–∫—Ä—É–∂–µ–Ω–∏—è

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
robot/
‚îú‚îÄ‚îÄ Motors/           # Arduino –∫–æ–¥ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –º–æ—Ç–æ—Ä–∞–º–∏
‚îÇ   ‚îú‚îÄ‚îÄ Motors.ino   # –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–¥ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –º–æ—Ç–æ—Ä–∞–º–∏
‚îÇ   ‚îî‚îÄ‚îÄ compile.sh   # –°–∫—Ä–∏–ø—Ç –∫–æ–º–ø–∏–ª—è—Ü–∏–∏ –¥–ª—è Arduino
‚îú‚îÄ‚îÄ Sensors/          # Arduino –∫–æ–¥ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –¥–∞—Ç—á–∏–∫–∞–º–∏
‚îÇ   ‚îú‚îÄ‚îÄ Sensors.ino  # –ö–æ–¥ –¥–ª—è —É–ª—å—Ç—Ä–∞–∑–≤—É–∫–æ–≤–æ–≥–æ –¥–∞—Ç—á–∏–∫–∞
‚îÇ   ‚îî‚îÄ‚îÄ compile.sh   # –°–∫—Ä–∏–ø—Ç –∫–æ–º–ø–∏–ª—è—Ü–∏–∏ –¥–ª—è Arduino
‚îú‚îÄ‚îÄ ROS2/            # ROS2 –ø–∞–∫–µ—Ç—ã –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ä–æ–±–æ—Ç–æ–º
‚îÇ   ‚îú‚îÄ‚îÄ robot_bringup/      # –û—Å–Ω–æ–≤–Ω–æ–π –ø–∞–∫–µ—Ç –∑–∞–ø—É—Å–∫–∞
‚îÇ   ‚îú‚îÄ‚îÄ robot_odometry/     # –†–∞—Å—á–µ—Ç –æ–¥–æ–º–µ—Ç—Ä–∏–∏
‚îÇ   ‚îú‚îÄ‚îÄ robot_sonar/        # –û–±—Ä–∞–±–æ—Ç–∫–∞ —É–ª—å—Ç—Ä–∞–∑–≤—É–∫–∞
‚îÇ   ‚îú‚îÄ‚îÄ robot_teleop/       # –¢–µ–ª–µ—É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ
‚îÇ   ‚îú‚îÄ‚îÄ robot_lidar/ # –î—Ä–∞–π–≤–µ—Ä –ª–∏–¥–∞—Ä–∞ LDS01RR
‚îÇ   ‚îú‚îÄ‚îÄ install_packages.sh # –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø–∞–∫–µ—Ç–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ run_robot.sh        # –ó–∞–ø—É—Å–∫ —Å–∏—Å—Ç–µ–º—ã
‚îÇ   ‚îú‚îÄ‚îÄ upload_packages.sh  # –ó–∞–≥—Ä—É–∑–∫–∞ –Ω–∞ —Ä–æ–±–æ—Ç–∞
‚îÇ   ‚îú‚îÄ‚îÄ build_on_robot.sh   # –°–±–æ—Ä–∫–∞ –Ω–∞ —Ä–æ–±–æ—Ç–µ
‚îÇ   ‚îú‚îÄ‚îÄ diagnose_packages.sh # –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –ø–∞–∫–µ—Ç–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ test_package.sh     # –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–∞–∫–µ—Ç–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ PACKAGES_SUMMARY.md # –û–ø–∏—Å–∞–Ω–∏–µ –ø–∞–∫–µ—Ç–æ–≤
‚îÇ   ‚îî‚îÄ‚îÄ requirements.txt    # Python –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
‚îú‚îÄ‚îÄ 3dprint/         # 3D –º–æ–¥–µ–ª–∏ –∫—Ä–µ–ø–ª–µ–Ω–∏–π –∏ –∫–æ—Ä–ø—É—Å–∞ (FreeCAD .FCStd)
‚îú‚îÄ‚îÄ docs/            # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –∏ —Å—Ö–µ–º—ã
‚îÇ   ‚îú‚îÄ‚îÄ LDS01RR/     # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ª–∏–¥–∞—Ä–∞
‚îÇ   ‚îî‚îÄ‚îÄ *.pdf        # –°—Ö–µ–º—ã Orange Pi Zero 3
‚îú‚îÄ‚îÄ motor_test.py    # –°–∫—Ä–∏–ø—Ç —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –º–æ—Ç–æ—Ä–æ–≤
‚îú‚îÄ‚îÄ serial_read.py   # –£—Ç–∏–ª–∏—Ç–∞ —á—Ç–µ–Ω–∏—è Serial –¥–∞–Ω–Ω—ã—Ö
‚îú‚îÄ‚îÄ compile.sh       # –û—Å–Ω–æ–≤–Ω–æ–π —Å–∫—Ä–∏–ø—Ç –∫–æ–º–ø–∏–ª—è—Ü–∏–∏ –∏ –∑–∞–≥—Ä—É–∑–∫–∏
‚îî‚îÄ‚îÄ upload_py.sh     # –ó–∞–≥—Ä—É–∑–∫–∞ Python —Å–∫—Ä–∏–ø—Ç–æ–≤
```

## üê≥ Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è

–ö–∞–∂–¥—ã–π ROS2 –ø–∞–∫–µ—Ç —É–ø–∞–∫–æ–≤–∞–Ω –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–π Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è:

- **–ò–∑–æ–ª—è—Ü–∏–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π** - –∫–∞–∂–¥—ã–π –ø–∞–∫–µ—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ —Å–≤–æ–µ–º –æ–∫—Ä—É–∂–µ–Ω–∏–∏
- **–ü—Ä–æ—Å—Ç–æ—Ç—ã —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è** - –æ–¥–∏–Ω –∫–æ–º–∞–Ω–¥–∞ –¥–ª—è –∑–∞–ø—É—Å–∫–∞
- **–ü–æ—Ä—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏** - —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ –ª—é–±–æ–π —Å–∏—Å—Ç–µ–º–µ —Å Docker
- **–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç–∏** - –ª–µ–≥–∫–æ –¥–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã

### –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

- **Entrypoint —Å–∫—Ä–∏–ø—Ç—ã** - –∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è ROS2 –æ–∫—Ä—É–∂–µ–Ω–∏—è –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞—Ö
- **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞–º–∏** - –ø—Ä–æ–±—Ä–æ—Å USB –ø–æ—Ä—Ç–æ–≤ –¥–ª—è Serial —Å–≤—è–∑–∏
- **–°–µ—Ç–µ–≤–æ–µ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ** - —Ä–µ–∂–∏–º host –¥–ª—è DDS –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–∏ –º–µ–∂–¥—É –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞–º–∏
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Å–±–æ—Ä–∫–∞** - Dockerfile –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –ø–∞–∫–µ—Ç–∞

## üîß –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Å–∏—Å—Ç–µ–º—ã

### Arduino –º–æ–¥—É–ª–∏

#### Motors (–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –º–æ—Ç–æ—Ä–∞–º–∏)

- **–§–∞–π–ª**: `Motors/Motors.ino`
- **–§—É–Ω–∫—Ü–∏–∏**:
  - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–≤—É–º—è DC –º–æ—Ç–æ—Ä–∞–º–∏ —á–µ—Ä–µ–∑ –¥—Ä–∞–π–≤–µ—Ä TB6612FNG
  - –ß—Ç–µ–Ω–∏–µ —ç–Ω–∫–æ–¥–µ—Ä–æ–≤ –¥–ª—è –æ–¥–æ–º–µ—Ç—Ä–∏–∏
  - –û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–æ–º–∞–Ω–¥ –ø–æ Serial
- **–ü–∏–Ω—ã**:
  - –õ–µ–≤—ã–π –º–æ—Ç–æ—Ä: IN1=5, IN2=6, ENA=9
  - –ü—Ä–∞–≤—ã–π –º–æ—Ç–æ—Ä: IN3=7, IN4=8, ENB=10
  - –≠–Ω–∫–æ–¥–µ—Ä—ã: LEFT_H1=4, LEFT_H2=12, RIGHT_H1=2, RIGHT_H2=3

#### Sensors (–î–∞—Ç—á–∏–∫–∏)

- **–§–∞–π–ª**: `Sensors/Sensors.ino`
- **–§—É–Ω–∫—Ü–∏–∏**:
  - –£–ª—å—Ç—Ä–∞–∑–≤—É–∫–æ–≤–æ–π –¥–∞—Ç—á–∏–∫ HC-SR04
  - –ü–µ—Ä–µ–¥–∞—á–∞ –¥–∞–Ω–Ω—ã—Ö –æ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏—è—Ö
- **–ü–∏–Ω—ã**:
  - TRIG=9, ECHO=10

### ROS2 –ø–∞–∫–µ—Ç—ã

–ü–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–µ ROS2 –ø–∞–∫–µ—Ç—ã –¥–ª—è –∞–≤—Ç–æ–Ω–æ–º–Ω–æ–≥–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π Docker:

#### üì¶ robot_bringup

–û—Å–Ω–æ–≤–Ω–æ–π –ø–∞–∫–µ—Ç –¥–ª—è –∑–∞–ø—É—Å–∫–∞ –≤—Å–µ—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ —Ä–æ–±–æ—Ç–∞

#### üì¶ robot_odometry

–†–∞—Å—á–µ—Ç –æ–¥–æ–º–µ—Ç—Ä–∏–∏ –Ω–∞ –æ—Å–Ω–æ–≤–µ –¥–∞–Ω–Ω—ã—Ö —ç–Ω–∫–æ–¥–µ—Ä–æ–≤

- **–¢–æ–ø–∏–∫–∏**: `/odom` (nav_msgs/Odometry)
- **–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è**: `config/odometry_params.yaml`
- **Docker**: –°–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä —Å entrypoint —Å–∫—Ä–∏–ø—Ç–æ–º

#### üì¶ robot_sonar

–û–±—Ä–∞–±–æ—Ç–∫–∞ –¥–∞–Ω–Ω—ã—Ö —É–ª—å—Ç—Ä–∞–∑–≤—É–∫–æ–≤–æ–≥–æ –¥–∞—Ç—á–∏–∫–∞

- **–¢–æ–ø–∏–∫–∏**: `/ultrasonic_sensor/range` (sensor_msgs/Range)
- **–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è**: `config/sonar_params.yaml`
- **Docker**: –°–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä —Å entrypoint —Å–∫—Ä–∏–ø—Ç–æ–º

#### üì¶ robot_teleop

–¢–µ–ª–µ—É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–æ–±–æ—Ç–æ–º —Å –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã

- **–ü–æ–¥–ø–∏—Å–∫–∞**: `/cmd_vel` (geometry_msgs/Twist)
- **–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è**: `config/teleop_params.yaml`
- **Docker**: –°–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä —Å entrypoint —Å–∫—Ä–∏–ø—Ç–æ–º

#### üì¶ robot_lidar

–î—Ä–∞–π–≤–µ—Ä –¥–ª—è –ª–∏–¥–∞—Ä–∞ LDS01RR

- **–¢–æ–ø–∏–∫–∏**: `/scan` (sensor_msgs/LaserScan)
- **–§—É–Ω–∫—Ü–∏–∏**: 2D –ª–∞–∑–µ—Ä–Ω–æ–µ —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –Ω–∞–≤–∏–≥–∞—Ü–∏–∏
- **Docker**: –°–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä —Å entrypoint —Å–∫—Ä–∏–ø—Ç–æ–º

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –ù–∞—Ç–∏–≤–Ω–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞ ROS2 –ø–∞–∫–µ—Ç–æ–≤

```bash
cd ROS2/
./install_packages.sh
```

### –ó–∞–ø—É—Å–∫ —á–µ—Ä–µ–∑ Docker

–ö–∞–∂–¥—ã–π ROS2 –ø–∞–∫–µ—Ç –∏–º–µ–µ—Ç —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –∑–∞–ø—É—Å–∫–∞:

```bash
# –°–±–æ—Ä–∫–∞ Docker –æ–±—Ä–∞–∑–æ–≤ –¥–ª—è –≤—Å–µ—Ö –ø–∞–∫–µ—Ç–æ–≤
cd ROS2/robot_teleop/
docker build -t robot_teleop .

cd ../robot_sonar/
docker build -t robot_sonar .

cd ../robot_odometry/
docker build -t robot_odometry .

cd ../robot_lidar/
docker build -t robot_lidar .

# –ó–∞–ø—É—Å–∫ –æ—Ç–¥–µ–ª—å–Ω—ã—Ö –ø–∞–∫–µ—Ç–æ–≤ –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞—Ö
docker run --rm --device=/dev/ttyUSB0 robot_teleop
docker run --rm --device=/dev/ttyUSB1 robot_sonar
docker run --rm --device=/dev/ttyUSB0 robot_odometry
docker run --rm --device=/dev/ttyUSB2 robot_lidar

# –ó–∞–ø—É—Å–∫ —Å —Å–µ—Ç–µ–≤—ã–º —Ä–µ–∂–∏–º–æ–º host –¥–ª—è ROS2 DDS
docker run --rm --network host --device=/dev/ttyUSB0 robot_teleop
```

### pyhton3 –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

```bash
sudo apt install python3-pip
sudo apt install python3-serial
```

### –ó–∞–ø—É—Å–∫ —Å–∏—Å—Ç–µ–º—ã (–Ω–∞—Ç–∏–≤–Ω–æ)

```bash
# –ü–æ–ª–Ω—ã–π –∑–∞–ø—É—Å–∫ –≤—Å–µ—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
./run_robot.sh full

# –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã
./run_robot.sh keyboard

# –¢–æ–ª—å–∫–æ –æ–¥–æ–º–µ—Ç—Ä–∏—è
./run_robot.sh odometry

# –° –ª–∏–¥–∞—Ä–æ–º
./run_robot.sh lidar
```

### –°–±–æ—Ä–∫–∞ –∏ –∑–∞–≥—Ä—É–∑–∫–∞ –Ω–∞ —Ä–æ–±–æ—Ç–∞

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø–∞–∫–µ—Ç–æ–≤ –Ω–∞ —É–¥–∞–ª–µ–Ω–Ω–æ–≥–æ —Ä–æ–±–æ—Ç–∞
cd ROS2/
./upload_packages.sh

# –°–±–æ—Ä–∫–∞ –Ω–∞ —Ä–æ–±–æ—Ç–µ
./build_on_robot.sh

# –£–¥–∞–ª–µ–Ω–Ω—ã–π –∑–∞–ø—É—Å–∫
ssh -i ~/.ssh/id_rsa orangepi@192.168.2.141 'cd ~/ros2_ws && ./run_robot.sh full'
```

### –ö–æ–º–ø–∏–ª—è—Ü–∏—è Arduino –∫–æ–¥–∞

#### arduino-cli

```bash
wget https://downloads.arduino.cc/arduino-cli/arduino-cli_latest_Linux_ARM64.tar.gz
tar -xf arduino-cli_latest_Linux_ARM64.tar.gz
sudo mv arduino-cli /usr/local/bin/

/usr/local/bin/arduino-cli version

arduino-cli core update-index
arduino-cli core install arduino:avr

```

```bash
# –û—Å–Ω–æ–≤–Ω–æ–π —Å–∫—Ä–∏–ø—Ç (–∫–æ–º–ø–∏–ª—è—Ü–∏—è –∏ –∑–∞–≥—Ä—É–∑–∫–∞)
./compile.sh

# –î–ª—è –º–æ—Ç–æ—Ä–æ–≤ –æ—Ç–¥–µ–ª—å–Ω–æ
cd Motors/
./compile.sh

# –î–ª—è –¥–∞—Ç—á–∏–∫–æ–≤ –æ—Ç–¥–µ–ª—å–Ω–æ
cd Sensors/
./compile.sh
```

## üõ† –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏—è

### –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ Arduino

- **Motors Arduino**: –ø–æ–¥–∫–ª—é—á–∏—Ç—å –∫ Orange Pi —á–µ—Ä–µ–∑ USB (/dev/ttyUSB0)
- **Sensors Arduino**: –ø–æ–¥–∫–ª—é—á–∏—Ç—å –∫ Orange Pi —á–µ—Ä–µ–∑ USB (/dev/ttyUSB1)
- –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –ø–æ—Ä—Ç—ã –≤ ROS2 –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

### –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –ª–∏–¥–∞—Ä–∞ LDS01RR

- **–ü–∏—Ç–∞–Ω–∏–µ**: 5V
- **–ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å**: Serial (115200 baud)
- **–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ**: –∫ Orange Pi —á–µ—Ä–µ–∑ USB-Serial –∫–æ–Ω–≤–µ—Ä—Ç–µ—Ä

### –°—Ö–µ–º–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –º–æ—Ç–æ—Ä–æ–≤

```
TB6612FNG –¥—Ä–∞–π–≤–µ—Ä:
- STBY -> Pin 11
- –õ–µ–≤—ã–π –º–æ—Ç–æ—Ä: AIN1->5, AIN2->6, PWMA->9
- –ü—Ä–∞–≤—ã–π –º–æ—Ç–æ—Ä: BIN1->7, BIN2->8, PWMB->10
- –≠–Ω–∫–æ–¥–µ—Ä—ã: –ø–æ–¥–∫–ª—é—á–∏—Ç—å –∫ —Ü–∏—Ñ—Ä–æ–≤—ã–º –ø–∏–Ω–∞–º —Å –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏—è–º–∏
```

### –î–∞—Ç—á–∏–∫–∏

```
HC-SR04:
- VCC -> 5V
- GND -> GND
- Trig -> Pin 9
- Echo -> Pin 10
```

## üì° –ü—Ä–æ—Ç–æ–∫–æ–ª —Å–≤—è–∑–∏

### –ö–æ–º–∞–Ω–¥—ã –¥–ª—è –º–æ—Ç–æ—Ä–æ–≤

- `CMD_LEFT_FORWARD (0)` - –ª–µ–≤—ã–π –º–æ—Ç–æ—Ä –≤–ø–µ—Ä–µ–¥
- `CMD_LEFT_BACKWARD (1)` - –ª–µ–≤—ã–π –º–æ—Ç–æ—Ä –Ω–∞–∑–∞–¥
- `CMD_RIGHT_FORWARD (2)` - –ø—Ä–∞–≤—ã–π –º–æ—Ç–æ—Ä –≤–ø–µ—Ä–µ–¥
- `CMD_RIGHT_BACKWARD (3)` - –ø—Ä–∞–≤—ã–π –º–æ—Ç–æ—Ä –Ω–∞–∑–∞–¥
- `CMD_STOP_MOTORS (6)` - –æ—Å—Ç–∞–Ω–æ–≤–∫–∞ –≤—Å–µ—Ö –º–æ—Ç–æ—Ä–æ–≤

### –°—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–∞–Ω–Ω—ã—Ö

```cpp
struct Command {
  uint8_t cmd;
  uint8_t value;  // —Å–∫–æ—Ä–æ—Å—Ç—å 0-255
};

struct SensorData {
  uint32_t timestamp;
  float left_odometry;
  float right_odometry;
  // ... –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è
};
```

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –¢–µ—Å—Ç –º–æ—Ç–æ—Ä–æ–≤

```bash
python3 motor_test.py
```

### –ß—Ç–µ–Ω–∏–µ Serial –¥–∞–Ω–Ω—ã—Ö

```bash
python3 serial_read.py
```

### –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ ROS2

```bash
cd ROS2/
./diagnose_packages.sh
./test_package.sh
```

### –¢–µ–ª–µ—É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ

```bash
# –ß–µ—Ä–µ–∑ ROS2 –ø–∞–∫–µ—Ç
cd ROS2/
./run_robot.sh keyboard

# –ò–ª–∏ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π teleop_twist_keyboard
ros2 run teleop_twist_keyboard teleop_twist_keyboard
```

### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –¥–∞–Ω–Ω—ã—Ö

```bash
# –û–¥–æ–º–µ—Ç—Ä–∏—è
ros2 topic echo /odom

# –£–ª—å—Ç—Ä–∞–∑–≤—É–∫
ros2 topic echo /ultrasonic_sensor/range

# –õ–∏–¥–∞—Ä
ros2 topic echo /scan

# –ö–æ–º–∞–Ω–¥—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
ros2 topic echo /cmd_vel
```

## üìã –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

### –ü—Ä–æ–≥—Ä–∞–º–º–Ω–æ–µ –æ–±–µ—Å–ø–µ—á–µ–Ω–∏–µ

- **Arduino IDE** –∏–ª–∏ **arduino-cli**
- **ROS2 Jazzy** (–Ω–∞ Orange Pi) –∏–ª–∏ **Docker**
- **Python 3.8+**
- **pyserial** –¥–ª—è Python —Å–∫—Ä–∏–ø—Ç–æ–≤
- **colcon** –¥–ª—è —Å–±–æ—Ä–∫–∏ ROS2 –ø–∞–∫–µ—Ç–æ–≤ (–ø—Ä–∏ –Ω–∞—Ç–∏–≤–Ω–æ–π —É—Å—Ç–∞–Ω–æ–≤–∫–µ)
- **Docker** (–¥–ª—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–Ω–æ–≥–æ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è)

### –ê–ø–ø–∞—Ä–∞—Ç–Ω–æ–µ –æ–±–µ—Å–ø–µ—á–µ–Ω–∏–µ

- **Orange Pi Zero 3** (–æ—Å–Ω–æ–≤–Ω–æ–π –∫–æ–º–ø—å—é—Ç–µ—Ä)
- **Arduino Uno/Nano** x2 (–º–æ—Ç–æ—Ä—ã –∏ –¥–∞—Ç—á–∏–∫–∏)
- **TB6612FNG** (–¥—Ä–∞–π–≤–µ—Ä –º–æ—Ç–æ—Ä–æ–≤)
- **HC-SR04** (—É–ª—å—Ç—Ä–∞–∑–≤—É–∫–æ–≤–æ–π –¥–∞—Ç—á–∏–∫)
- **LDS01RR** (–ª–∏–¥–∞—Ä –¥–ª—è 2D —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è)
- **DC –º–æ—Ç–æ—Ä—ã —Å —ç–Ω–∫–æ–¥–µ—Ä–∞–º–∏** x2
- **–ê–∫–∫—É–º—É–ª—è—Ç–æ—Ä** –∏ **DC-DC –∫–æ–Ω–≤–µ—Ä—Ç–µ—Ä**

## üîç –û—Ç–ª–∞–¥–∫–∞

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è

```bash
# –°–ø–∏—Å–æ–∫ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –ø–æ—Ä—Ç–æ–≤
ls /dev/ttyUSB* /dev/ttyACM*

# –¢–µ—Å—Ç —Å–≤—è–∑–∏
python3 serial_read.py

# –ü—Ä–æ–≤–µ—Ä–∫–∞ ROS2 –ø–∞–∫–µ—Ç–æ–≤
ros2 pkg list | grep robot
```

### –õ–æ–≥–∏ ROS2

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–æ–ø–∏–∫–æ–≤
ros2 topic list

# –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –¥–∞–Ω–Ω—ã—Ö
ros2 topic echo /odom
ros2 topic echo /scan
ros2 topic echo /ultrasonic_sensor/range

# –û—Ç–ø—Ä–∞–≤–∫–∞ –∫–æ–º–∞–Ω–¥ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
ros2 topic pub /cmd_vel geometry_msgs/msg/Twist \
  "{linear: {x: 0.1}, angular: {z: 0.0}}" --once
```

### –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–∏–¥–∞—Ä–∞
cd ROS2/robot_lidar/
python3 test_driver.py

# –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –≤—Å–µ—Ö –ø–∞–∫–µ—Ç–æ–≤
cd ROS2/
./diagnose_packages.sh
```

## üìÑ –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

### 3D –º–æ–¥–µ–ª–∏ (`3dprint/`)

–í –ø–∞–ø–∫–µ —Å–æ–¥–µ—Ä–∂–∞—Ç—Å—è 3D –º–æ–¥–µ–ª–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ —Ä–æ–±–æ—Ç–∞ –≤ —Ñ–æ—Ä–º–∞—Ç–µ **FreeCAD (.FCStd)**:

- –ö—Ä–µ–ø–ª–µ–Ω–∏—è –¥–ª—è –∑–∞—Ä—è–¥–Ω–æ–≥–æ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞
- –ö—Ä–µ–ø–ª–µ–Ω–∏—è –¥–ª—è DC-DC –∫–æ–Ω–≤–µ—Ä—Ç–µ—Ä–∞
- –ö—Ä–µ–ø–ª–µ–Ω–∏—è –¥–ª—è –ø–æ–≤–µ—Ä–±–∞–Ω–∫–∞
- –ö—Ä–µ–ø–ª–µ–Ω–∏—è –¥–ª—è –¥—Ä–∞–π–≤–µ—Ä–∞ –º–æ—Ç–æ—Ä–æ–≤ TB6612FNG
- –ö—Ä–µ–ø–ª–µ–Ω–∏—è –¥–ª—è –∞–∫–∫—É–º—É–ª—è—Ç–æ—Ä–∞
- –ö—Ä–µ–ø–ª–µ–Ω–∏—è –¥–ª—è –∫–æ–ª–µ—Å
- –ö—Ä–µ–ø–ª–µ–Ω–∏–µ –∑–∞–¥–Ω–µ–≥–æ –∫–æ–ª–µ—Å–∞
- –ü–ª–∞—Å—Ç–∏–Ω–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–∏—Ç–∞–Ω–∏–µ–º
- –°—Ç–æ–π–∫–∏ 65–º–º

### –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è (`docs/`)

–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –∏ —Å—Ö–µ–º—ã:

- **–õ–∏–¥–∞—Ä LDS01RR**: datasheet, SDK, –ø—Ä–∏–º–µ—Ä—ã ROS –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏
- **Orange Pi Zero 3**: —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏ —Å—Ö–µ–º—ã
- –°—Ö–µ–º—ã –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∏ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏ —Å–±–æ—Ä–∫–∏

## üåê –°–µ—Ç–µ–≤–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞

### Cyclone DDS

```bash
sudo apt install ros-jazzy-rmw-cyclonedds-cpp
export RMW_IMPLEMENTATION=rmw_cyclonedx_cpp
echo "export RMW_IMPLEMENTATION=rmw_cyclonedx_cpp" >> ~/.bashrc
```

#### –ü—Ä–æ–≤–µ—Ä–∫–∞

##### host1

```bash
sudo apt install ros-jazzy-demo-nodes-cpp
ros2 run demo_nodes_cpp listener
```

##### host2

```bash
sudo apt install ros-jazzy-demo-nodes-cpp
ros2 run demo_nodes_cpp talker
```

### SSH –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ

```bash
# –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ —Ä–æ–±–æ—Ç—É
ssh -i ~/.ssh/id_rsa orangepi@192.168.2.141

# –ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–æ–≤
scp -i ~/.ssh/id_rsa file.py orangepi@192.168.2.141:~
```

## –ö–∞–º–µ—Ä–∞

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞

```bash
sudo apt install ros-jazzy-usb-cam
```

### –ù–∞ —Ä–æ–±–æ—Ç–µ

```bash
ros2 run usb_cam usb_cam_node_exe --ros-args -p video_device:="/dev/video1" -p pixel_format:="yuyv"
```

### –ù–∞ GUI

```bash
ros2 run rqt_image_view rqt_image_view --ros-args -r image:=/image_raw
```

### –£–¥–∞–ª–µ–Ω–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ

```bash
# –ó–∞–ø—É—Å–∫ —Ä–æ–±–æ—Ç–∞
ssh -i ~/.ssh/id_rsa orangepi@192.168.2.141 'cd ~/ros2_ws && ./run_robot.sh full'

# –ó–∞–≥—Ä—É–∑–∫–∞ –ø–∞–∫–µ—Ç–æ–≤ –Ω–∞ —Ä–æ–±–æ—Ç–∞
cd ROS2/
./upload_packages.sh
```

## ü§ù –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–æ–º–∞–Ω–¥

–í—Å–µ –∫–æ–º–∞–Ω–¥—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç –±–∏–Ω–∞—Ä–Ω—ã–π –ø—Ä–æ—Ç–æ–∫–æ–ª —á–µ—Ä–µ–∑ Serial (115200 baud).

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö —Å–µ–Ω—Å–æ—Ä–æ–≤

1. –î–æ–±–∞–≤–∏—Ç—å –∫–æ–¥ –≤ `Sensors/Sensors.ino`
2. –°–æ–∑–¥–∞—Ç—å —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–π ROS2 –ø–∞–∫–µ—Ç –≤ `ROS2/`
3. –û–±–Ω–æ–≤–∏—Ç—å launch —Ñ–∞–π–ª—ã
4. –î–æ–±–∞–≤–∏—Ç—å –≤ `run_robot.sh`

### –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤—ã—Ö ROS2 –ø–∞–∫–µ—Ç–æ–≤

```bash
cd ROS2/
# –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –ø–∞–∫–µ—Ç–∞
ros2 pkg create --build-type ament_python robot_new_package

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞
./install_packages.sh
```

## üöÄ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ —Å–∏—Å—Ç–µ–º—ã

### –ê–≤—Ç–æ–Ω–æ–º–Ω–∞—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è

- –û–¥–æ–º–µ—Ç—Ä–∏—è –Ω–∞ –æ—Å–Ω–æ–≤–µ —ç–Ω–∫–æ–¥–µ—Ä–æ–≤
- 2D SLAM —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –ª–∏–¥–∞—Ä–∞ LDS01RR
- –ò–∑–±–µ–≥–∞–Ω–∏–µ –ø—Ä–µ–ø—è—Ç—Å—Ç–≤–∏–π —á–µ—Ä–µ–∑ —É–ª—å—Ç—Ä–∞–∑–≤—É–∫
- –ü–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—É—Ç–∏

### –î–∏—Å—Ç–∞–Ω—Ü–∏–æ–Ω–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ

- –¢–µ–ª–µ—É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ ROS2 —Ç–æ–ø–∏–∫–∏
- SSH –¥–æ—Å—Ç—É–ø –¥–ª—è —É–¥–∞–ª–µ–Ω–Ω–æ–π –æ—Ç–ª–∞–¥–∫–∏
- –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å–æ—Å—Ç–æ—è–Ω–∏—è –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏

### –ú–æ–¥—É–ª—å–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

- –ù–µ–∑–∞–≤–∏—Å–∏–º—ã–µ ROS2 –ø–∞–∫–µ—Ç—ã
- –ì–∏–±–∫–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —á–µ—Ä–µ–∑ YAML —Ñ–∞–π–ª—ã
- –ü—Ä–æ—Å—Ç–æ–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö —Å–µ–Ω—Å–æ—Ä–æ–≤

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ü—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –ø—Ä–æ–±–ª–µ–º:

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –≤—Å–µ—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
2. –£–±–µ–¥–∏—Ç–µ—Å—å –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–æ—Ä—Ç–æ–≤
3. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ diagnostic —Å–∫—Ä–∏–ø—Ç—ã –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ ROS2
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏: `ros2 topic echo /diagnostics`

### –ß–∞—Å—Ç—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

- **–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö —Å Arduino**: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ—Ä—Ç—ã –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
- **–õ–∏–¥–∞—Ä –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç**: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–∏—Ç–∞–Ω–∏–µ –∏ —Å–∫–æ—Ä–æ—Å—Ç—å –ø–µ—Ä–µ–¥–∞—á–∏
- **ROS2 –ø–∞–∫–µ—Ç—ã –Ω–µ –Ω–∞–π–¥–µ–Ω—ã**: –í—ã–ø–æ–ª–Ω–∏—Ç—å `source install/setup.bash`

---

**–ê–≤—Ç–æ—Ä**: seko  
**–î–∞—Ç–∞**: 2025  
**–õ–∏—Ü–µ–Ω–∑–∏—è**: MIT
