# Robot Odometry Package

ROS2 пакет для публикации одометрии робота и управления движением с интегрированным телеуправлением.

## Описание

Этот пакет объединяет две основные функции:

1. Считывает данные одометрии с Arduino через последовательный порт
2. Обрабатывает команды телеуправления для управления моторами

Интеграция позволяет избежать конфликтов доступа к одному серийному порту.

## Установка

```bash
cd ~/ros2_ws/src
# Скопируйте пакет robot_odometry в src
cd ~/ros2_ws
colcon build --packages-select robot_odometry
source install/setup.bash
```

## Использование

```bash
# Запуск ноды одометрии с интегрированным teleop
ros2 run robot_odometry odometry_node

# Запуск с launch файлом
ros2 launch robot_odometry odometry.launch.py

# Просмотр топиков одометрии
ros2 topic echo /odom

# Отправка команд управления
ros2 topic pub /cmd_vel geometry_msgs/msg/Twist \
  "{linear: {x: 0.1, y: 0.0, z: 0.0}, angular: {x: 0.0, y: 0.0, z: 0.0}}"

# Запуск в режиме симуляции
ros2 run robot_odometry odometry_node --ros-args -p simulation_mode:=true
```

## Параметры

- `serial_port`: Порт Arduino (по умолчанию: /dev/ttyUSB0)
- `baud_rate`: Скорость передачи данных (по умолчанию: 115200)
- `wheel_base`: Расстояние между колесами в метрах (по умолчанию: 0.3)
- `max_linear`: Максимальная линейная скорость в м/с (по умолчанию: 0.5)
- `max_angular`: Максимальная угловая скорость в рад/с (по умолчанию: 1.57)
- `max_motor_speed`: Максимальная скорость мотора PWM (по умолчанию: 255)
- `simulation_mode`: Режим симуляции без подключения к Arduino (по умолчанию: false)

## Топики

### Публикуемые

- `/odom` (nav_msgs/Odometry): Информация об одометрии робота

### Подписываемые

- `/cmd_vel` (geometry_msgs/Twist): Команды управления движением

### TF Frames

- `odom` -> `base_link`: Трансформация положения робота

## Новая архитектура

В обновленной версии функциональность телеуправления интегрирована в одну ноду с одометрией для устранения конфликтов доступа к серийному порту. Это позволяет использовать один Arduino для обеих задач.
